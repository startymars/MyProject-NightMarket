import{H as x,F as V,c as m}from"./FooterView-fd88ece3.js";import{_ as $,m as k,a as I,r as u,o as d,c as i,b as r,d as t,w as g,F as p,e as f,B as y,C as P,f as T,i as S,D as N,t as _,E,p as A,h as D}from"./index-4c8d2d43.js";const{VITE_APP_URL:h,VITE_APP_PATH:v}={VITE_APP_URL:"https://vue3-course-api.hexschool.io/",VITE_APP_PATH:"cream21",BASE_URL:"/MyProject-NightMarket/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},U={data(){return{coupon:""}},components:{HeaderNav:x,FooterView:V},computed:{...k(m,["carts"])},methods:{...I(m,["getCarts"]),updateCartItem(e){const a={product_id:e.product.id,qty:e.qty};this.$http.put(`${h}/v2/api/${v}/cart/${e.id}`,{data:a}).then(l=>{alert("更新購物車",l.data),this.getCarts()}).catch(l=>{alert(l.data)})},deleteCartItem(e){this.$http.delete(`${h}/v2/api/${v}/cart/${e}`).then(a=>{console.log("刪除購物車品項",a.data),this.getCarts()}).catch(a=>{console.dir(a.data)})},deleteCarts(){this.$http.delete(`${h}/v2/api/${v}/carts`).then(e=>{console.log(e.data.message),this.getCarts()}).catch(e=>{console.log(e.data.message),alert(e.data.message)})},useCoupon(){console.log("取得優惠券",this.coupon)}},mounted(){this.getCarts()}},n=e=>(A("data-v-8949115a"),e=e(),D(),e),j=n(()=>t("div",{class:"newBanner d-flex justify-content-center align-items-center"},[t("div",{class:"newsTitle"},"購物車")],-1)),B={class:"bg-secondary"},F={class:"container"},H={class:"cartClear d-flex justify-content-between align-items-center"},L={"aria-label":"breadcrumb",class:"pt-5 pb-5"},M={class:"breadcrumb"},R={class:"breadcrumb-item"},q=n(()=>t("li",{class:"breadcrumb-item active","aria-current":"page"},"購物車",-1)),O={class:"text-end mb-3"},z={class:"row"},G={class:"col-8"},J={class:"table"},K=n(()=>t("thead",null,[t("tr",null,[t("th",{class:"col"}),t("th",{class:"col"},"圖片"),t("th",{class:"col"},"商品名稱"),t("th",{class:"col"},"價格"),t("th",{class:"col"},"數量"),t("th",{class:"col"},"總價")])],-1)),Q=["onClick"],W=n(()=>t("span",{class:"material-symbols-outlined"},"clear",-1)),X=[W],Y={style:{width:"150px"}},Z={class:"fs-6 fw-bold"},tt={class:"input-group input-group-sm"},et=["onUpdate:modelValue","onChange"],st=["value"],at={class:"col-4"},ot={class:"discount"},ct={class:"mb-3"},nt=n(()=>t("label",{for:"discount",class:"form-label fw-bold h5"},"優惠券折扣",-1)),lt={class:"text-end mb-3"},dt={class:"cartList p-3 mb-4"},it=T('<h5 class="mb-5" data-v-8949115a>購物清單總計</h5><div class="cartTotal" data-v-8949115a><div class="cartOrigin d-flex justify-content-between align-items-center" data-v-8949115a><p data-v-8949115a>原始價格</p><p data-v-8949115a>NT$100</p></div><div class="cartDiscount d-flex justify-content-between align-items-center" data-v-8949115a><p data-v-8949115a>折扣</p><p data-v-8949115a>-NT$30</p></div><hr data-v-8949115a><div class="totalPrice mb-3 d-flex justify-content-between align-items-center" data-v-8949115a><p class="fw-bold fs-6" data-v-8949115a>總付款金額</p><p class="fw-bold" data-v-8949115a>NT$450</p></div></div>',2),rt={class:"text-end mb-3"},_t=n(()=>t("button",{type:"button",class:"btn btn-primary"},"前往付款",-1));function ut(e,a,l,pt,ht,c){const C=u("HeaderNav"),b=u("router-link"),w=u("FooterView");return d(),i(p,null,[r(C,{class:"bg-black position-static"}),j,t("div",B,[t("div",F,[t("div",H,[t("nav",L,[t("ol",M,[t("li",R,[r(b,{to:"/"},{default:g(()=>[S("首頁")]),_:1})]),q])]),t("div",O,[t("button",{type:"button",class:"btn btn-lg btn-outline-primary",onClick:a[0]||(a[0]=(...s)=>c.deleteCarts&&c.deleteCarts(...s))}," 清空購物車 ")])]),t("div",z,[t("div",G,[t("table",J,[K,t("tbody",null,[(d(!0),i(p,null,f(e.carts.carts,s=>(d(),i("tr",{style:{"vertical-align":"middle"},key:s.id},[t("td",null,[t("button",{type:"button",class:"btn btn-danger btn-sm",onClick:o=>c.deleteCartItem(s.id)},X,8,Q)]),t("td",Y,[t("div",{style:N([{height:"100px","background-size":"cover","background-position":"center"},{backgroundImage:`url(${s.product.imageUrl})`}])},null,4)]),t("td",Z,_(s.product.title),1),t("td",null,"$"+_(s.product.price),1),t("td",null,[t("div",tt,[y(t("select",{name:"",id:"",class:"form-control","onUpdate:modelValue":o=>s.qty=o,onChange:o=>c.updateCartItem(s)},[(d(),i(p,null,f(10,o=>t("option",{value:o,key:o+"12345"},_(o),9,st)),64))],40,et),[[E,s.qty]])])]),t("td",null,"$"+_(s.total),1)]))),128))])])]),t("div",at,[t("div",ot,[t("div",ct,[nt,y(t("input",{type:"text",class:"form-control p-3",id:"discount",placeholder:"輸入優惠代碼","onUpdate:modelValue":a[1]||(a[1]=s=>this.coupon=s)},null,512),[[P,this.coupon]])]),t("div",lt,[t("button",{type:"button",class:"btn btn-primary",onClick:a[2]||(a[2]=(...s)=>c.useCoupon&&c.useCoupon(...s))}," 使用折扣 ")])]),t("div",dt,[it,t("div",rt,[r(b,{to:"/Order"},{default:g(()=>[_t]),_:1})])])])])])]),r(w)],64)}const mt=$(U,[["render",ut],["__scopeId","data-v-8949115a"]]);export{mt as default};
