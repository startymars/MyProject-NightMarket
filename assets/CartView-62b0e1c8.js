import{H as V,F as $,c as p}from"./FooterView-fcc41efd.js";import{bs as S,br as g,bt as I,aG as h,at as c,p as l,y as r,q as t,bk as b,F as m,aE as y,x as C,bm as k,bb as P,aU as i,o as T,af as N,ba as E,ax as A,au as U}from"./index-4f2fb7a1.js";import"./_commonjsHelpers-87174ba5.js";const{VITE_APP_URL:v,VITE_APP_PATH:f}={VITE_APP_URL:"https://vue3-course-api.hexschool.io/",VITE_APP_PATH:"cream21",BASE_URL:"/MyProject-NightMarket/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},j={data(){return{coupon:""}},components:{HeaderNav:V,FooterView:$},computed:{...g(p,["carts"]),...g(p,["cartStatus"])},methods:{...I(p,["getCarts"]),updateCartItem(e){const o={product_id:e.product.id,qty:e.qty};this.$http.put(`${v}/v2/api/${f}/cart/${e.id}`,{data:o}).then(_=>{alert("更新購物車",_.data),this.getCarts()}).catch(_=>{alert(_.data)})},deleteCartItem(e){this.$http.delete(`${v}/v2/api/${f}/cart/${e}`).then(o=>{console.log("刪除購物車品項",o.data),this.getCarts()}).catch(o=>{console.dir(o.data)})},deleteCarts(){this.$http.delete(`${v}/v2/api/${f}/carts`).then(e=>{console.log(e.data.message),this.getCarts()}).catch(e=>{console.log(e.data.message),alert(e.data.message)})},useCoupon(){console.log("取得優惠券",this.coupon)}},mounted(){this.getCarts()}},a=e=>(A("data-v-f0b57e60"),e=e(),U(),e),D=a(()=>t("div",{class:"newBanner d-flex justify-content-center align-items-center"},[t("div",{class:"newsTitle"},"購物車")],-1)),F={class:"bg-secondary"},H={class:"container"},q={class:"cartClear d-flex justify-content-between align-items-center"},B={"aria-label":"breadcrumb",class:"pt-5 pb-5"},L={class:"breadcrumb"},M={class:"breadcrumb-item"},R=a(()=>t("li",{class:"breadcrumb-item active","aria-current":"page"},"購物車",-1)),O={class:"text-end mb-3"},z={class:"row"},G={key:0,class:"col-8"},J={class:"table"},K=a(()=>t("thead",null,[t("tr",null,[t("th",{class:"col"}),t("th",{class:"col"},"圖片"),t("th",{class:"col"},"商品名稱"),t("th",{class:"col"},"價格"),t("th",{class:"col"},"數量"),t("th",{class:"col"},"總價")])],-1)),Q=["onClick"],W=a(()=>t("span",{class:"material-symbols-outlined"},"clear",-1)),X=[W],Y={style:{width:"150px"}},Z={class:"fs-6 fw-bold"},tt={class:"input-group input-group-sm"},et=["onUpdate:modelValue","onChange"],st=["value"],ot={key:1,class:"col-12 d-flex p-5 mb-5 justify-content-center align-items-center text-center border border-dark rounded"},at={class:"fs-3 align-middle"},nt={class:"mt-5"},ct=a(()=>t("button",{type:"button",class:"btn btn-primary px-5"}," 前往購物 ",-1)),lt={key:2,class:"col-4"},dt={class:"discount"},it={class:"mb-3"},rt=a(()=>t("label",{for:"discount",class:"form-label fw-bold h5"},"優惠券折扣",-1)),_t={class:"text-end mb-3"},ut={class:"cartList p-3 mb-4"},pt=a(()=>t("h5",{class:"mb-5"},"購物清單總計",-1)),ht={class:"cartTotal"},bt={class:"cartOrigin d-flex justify-content-between align-items-center"},mt=a(()=>t("p",null,"原始價格",-1)),vt=a(()=>t("div",{class:"cartDiscount d-flex justify-content-between align-items-center"},[t("p",null,"折扣"),t("p",null,"-NT$0")],-1)),ft=a(()=>t("hr",null,null,-1)),gt={class:"totalPrice mb-3 d-flex justify-content-between align-items-center"},yt=a(()=>t("p",{class:"fw-bold fs-6"},"總付款金額",-1)),Ct={class:"fw-bold"},kt={class:"text-end mb-3"},wt=a(()=>t("button",{type:"button",class:"btn btn-primary"}," 前往付款 ",-1));function xt(e,o,_,Vt,$t,d){const w=h("HeaderNav"),u=h("router-link"),x=h("FooterView");return c(),l(m,null,[r(w,{class:"bg-black position-static"}),D,t("div",F,[t("div",H,[t("div",q,[t("nav",B,[t("ol",L,[t("li",M,[r(u,{to:"/"},{default:b(()=>[C("首頁")]),_:1})]),R])]),t("div",O,[t("button",{type:"button",class:"btn btn-outline-primary fs-5",onClick:o[0]||(o[0]=(...s)=>d.deleteCarts&&d.deleteCarts(...s))}," 清空購物車 ")])]),t("div",z,[e.cartStatus?(c(),l("div",G,[t("table",J,[K,t("tbody",null,[(c(!0),l(m,null,y(e.carts.carts,s=>(c(),l("tr",{style:{"vertical-align":"middle"},key:s.id},[t("td",null,[t("button",{type:"button",class:"btn btn-outline-danger",onClick:n=>d.deleteCartItem(s.id)},X,8,Q)]),t("td",Y,[t("div",{style:N([{height:"100px","background-size":"cover","background-position":"center"},{backgroundImage:`url(${s.product.imageUrl})`}])},null,4)]),t("td",Z,i(s.product.title),1),t("td",null,"$"+i(s.product.price),1),t("td",null,[t("div",tt,[k(t("select",{name:"",id:"",class:"form-control","onUpdate:modelValue":n=>s.qty=n,onChange:n=>d.updateCartItem(s)},[(c(),l(m,null,y(10,n=>t("option",{value:n,key:n+"12345"},i(n),9,st)),64))],40,et),[[E,s.qty]])])]),t("td",null,"$"+i(s.total),1)]))),128))])])])):(c(),l("div",ot,[t("div",at,[C(" 目前購物車無任何商品唷！ "),t("div",nt,[r(u,{to:"/"},{default:b(()=>[ct]),_:1})])])])),e.cartStatus?(c(),l("div",lt,[t("div",dt,[t("div",it,[rt,k(t("input",{type:"text",class:"form-control p-3",id:"discount",placeholder:"輸入優惠代碼","onUpdate:modelValue":o[1]||(o[1]=s=>this.coupon=s)},null,512),[[P,this.coupon]])]),t("div",_t,[t("button",{type:"button",class:"btn btn-primary",onClick:o[2]||(o[2]=(...s)=>d.useCoupon&&d.useCoupon(...s))}," 使用折扣 ")])]),t("div",ut,[pt,t("div",ht,[t("div",bt,[mt,t("p",null,"NT$"+i(e.carts.total),1)]),vt,ft,t("div",gt,[yt,t("p",Ct,"NT$"+i(e.carts.final_total),1)])]),t("div",kt,[r(u,{to:"/Order"},{default:b(()=>[wt]),_:1})])])])):T("",!0)])])]),r(x)],64)}const Tt=S(j,[["render",xt],["__scopeId","data-v-f0b57e60"]]);export{Tt as default};
