import{H as x,F as $}from"./FooterView-f4b41880.js";import{_ as k,e as p,f as d,g as i,i as b,j as t,F as h,l as v,v as m,x as V,k as I,m as g,y as P,t as r,z as T,q as N,s as S}from"./index-bc7fac3d.js";const{VITE_APP_URL:u,VITE_APP_PATH:_}={VITE_APP_URL:"https://vue3-course-api.hexschool.io/",VITE_APP_PATH:"cream21",BASE_URL:"/MyProject-NightMarket/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},E={data(){return{carts:[],coupon:""}},components:{HeaderNav:x,FooterView:$},methods:{getCarts(){this.$http.get(`${u}/v2/api/${_}/cart`).then(e=>{console.log("取得購物車列表",e.data.data),this.carts=e.data.data,console.log("有被存入",this.carts)}).catch(e=>{alert(e.response.data)})},updateCartItem(e){const a={product_id:e.product.id,qty:e.qty};this.$http.put(`${u}/v2/api/${_}/cart/${e.id}`,{data:a}).then(n=>{alert("更新購物車",n.data),this.getCarts()}).catch(n=>{alert(n.data)})},deleteCartItem(e){this.$http.delete(`${u}/v2/api/${_}/cart/${e}`).then(a=>{console.log("刪除購物車品項",a.data),this.getCarts()}).catch(a=>{console.dir(a.data)})},deleteCarts(){this.$http.delete(`${u}/v2/api/${_}/carts`).then(e=>{console.log(e.data.message),this.getCarts()}).catch(e=>{console.log(e.data.message),alert(e.data.message)})},useCoupon(){console.log("取得優惠券",this.coupon)}},mounted(){this.getCarts()}},l=e=>(N("data-v-3b50777c"),e=e(),S(),e),j=l(()=>t("div",{class:"newBanner d-flex justify-content-center align-items-center"},[t("div",{class:"newsTitle"},"購物車")],-1)),A={class:"bg-secondary"},U={class:"container"},D={class:"cartClear d-flex justify-content-between align-items-center"},F=g('<nav aria-label="breadcrumb" class="pt-5 pb-5" data-v-3b50777c><ol class="breadcrumb" data-v-3b50777c><li class="breadcrumb-item" data-v-3b50777c><a href="#" data-v-3b50777c>首頁</a></li><li class="breadcrumb-item active" aria-current="page" data-v-3b50777c>購物車</li></ol></nav>',1),H={class:"text-end mb-3"},q={class:"row"},B={class:"col-8"},L={class:"table"},M=l(()=>t("thead",null,[t("tr",null,[t("th",{class:"col"}),t("th",{class:"col"},"圖片"),t("th",{class:"col"},"商品名稱"),t("th",{class:"col"},"價格"),t("th",{class:"col"},"數量"),t("th",{class:"col"},"總價")])],-1)),R=["onClick"],O=l(()=>t("span",{class:"material-symbols-outlined"},"clear",-1)),z=[O],G={style:{width:"150px"}},J={class:"fs-6 fw-bold"},K={class:"input-group input-group-sm"},Q=["onUpdate:modelValue","onChange"],W=["value"],X={class:"col-4"},Y={class:"discount"},Z={class:"mb-3"},tt=l(()=>t("label",{for:"discount",class:"form-label fw-bold h5"},"優惠券折扣",-1)),et={class:"text-end mb-3"},st={class:"cartList p-3 mb-4"},at=g('<h5 class="mb-5" data-v-3b50777c>購物清單總計</h5><div class="cartTotal" data-v-3b50777c><div class="cartOrigin d-flex justify-content-between align-items-center" data-v-3b50777c><p data-v-3b50777c>原始價格</p><p data-v-3b50777c>NT$100</p></div><div class="cartDiscount d-flex justify-content-between align-items-center" data-v-3b50777c><p data-v-3b50777c>折扣</p><p data-v-3b50777c>-NT$30</p></div><hr data-v-3b50777c><div class="totalPrice mb-3 d-flex justify-content-between align-items-center" data-v-3b50777c><p class="fw-bold fs-6" data-v-3b50777c>總付款金額</p><p class="fw-bold" data-v-3b50777c>NT$450</p></div></div>',2),ot={class:"text-end mb-3"},ct=l(()=>t("button",{type:"button",class:"btn btn-primary"},"前往付款",-1));function lt(e,a,n,nt,f,c){const y=p("HeaderNav"),C=p("router-link"),w=p("FooterView");return d(),i(h,null,[b(y,{class:"bg-black position-static"}),j,t("div",A,[t("div",U,[t("div",D,[F,t("div",H,[t("button",{type:"button",class:"btn btn-lg btn-outline-primary",onClick:a[0]||(a[0]=(...s)=>c.deleteCarts&&c.deleteCarts(...s))}," 清空購物車 ")])]),t("div",q,[t("div",B,[t("table",L,[M,t("tbody",null,[(d(!0),i(h,null,v(f.carts.carts,s=>(d(),i("tr",{style:{"vertical-align":"middle"},key:s.id},[t("td",null,[t("button",{type:"button",class:"btn btn-danger btn-sm",onClick:o=>c.deleteCartItem(s.id)},z,8,R)]),t("td",G,[t("div",{style:P([{height:"100px","background-size":"cover","background-position":"center"},{backgroundImage:`url(${s.product.imageUrl})`}])},null,4)]),t("td",J,r(s.product.title),1),t("td",null,"$"+r(s.product.price),1),t("td",null,[t("div",K,[m(t("select",{name:"",id:"",class:"form-control","onUpdate:modelValue":o=>s.qty=o,onChange:o=>c.updateCartItem(s)},[(d(),i(h,null,v(10,o=>t("option",{value:o,key:o+"12345"},r(o),9,W)),64))],40,Q),[[T,s.qty]])])]),t("td",null,"$"+r(s.total),1)]))),128))])])]),t("div",X,[t("div",Y,[t("div",Z,[tt,m(t("input",{type:"text",class:"form-control p-3",id:"discount",placeholder:"輸入優惠代碼","onUpdate:modelValue":a[1]||(a[1]=s=>this.coupon=s)},null,512),[[V,this.coupon]])]),t("div",et,[t("button",{type:"button",class:"btn btn-primary",onClick:a[2]||(a[2]=(...s)=>c.useCoupon&&c.useCoupon(...s))}," 使用折扣 ")])]),t("div",st,[at,t("div",ot,[b(C,{to:"/Order"},{default:I(()=>[ct]),_:1})])])])])])]),b(w)],64)}const rt=k(E,[["render",lt],["__scopeId","data-v-3b50777c"]]);export{rt as default};
