import{H as V,F as w}from"./FooterView-2c0ed946.js";import{v as x,x as T,_ as $,y as I,e as _,f as d,g as r,i as u,j as t,F as p,l as v,z as f,A,k,m,B as E,t as i,C as S,q as N,s as R}from"./index-d865b6d9.js";const{VITE_APP_URL:U,VITE_APP_PATH:D}={VITE_APP_URL:"https://vue3-course-api.hexschool.io/",VITE_APP_PATH:"cream21",BASE_URL:"/MyProject-NightMarket/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},H=x("cartStore",{state:()=>({carts:[]}),actions:{getCarts(){T.get(`${U}/v2/api/${D}/cart`).then(e=>{console.log("ww取得購物車列表",e.data.data),this.carts=e.data.data,console.log("有被存入",this.carts)}).catch(e=>{alert(e.response.data)})}},getters:{}});const{VITE_APP_URL:b,VITE_APP_PATH:h}={VITE_APP_URL:"https://vue3-course-api.hexschool.io/",VITE_APP_PATH:"cream21",BASE_URL:"/MyProject-NightMarket/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},L={data(){return{carts:[],coupon:""}},components:{HeaderNav:V,FooterView:w},computed:{...I(H,["carts"])},methods:{updateCartItem(e){const a={product_id:e.product.id,qty:e.qty};this.$http.put(`${b}/v2/api/${h}/cart/${e.id}`,{data:a}).then(n=>{alert("更新購物車",n.data),this.getCarts()}).catch(n=>{alert(n.data)})},deleteCartItem(e){this.$http.delete(`${b}/v2/api/${h}/cart/${e}`).then(a=>{console.log("刪除購物車品項",a.data),this.getCarts()}).catch(a=>{console.dir(a.data)})},deleteCarts(){this.$http.delete(`${b}/v2/api/${h}/carts`).then(e=>{console.log(e.data.message),this.getCarts()}).catch(e=>{console.log(e.data.message),alert(e.data.message)})},useCoupon(){console.log("取得優惠券",this.coupon)}}},l=e=>(N("data-v-668b183f"),e=e(),R(),e),j=l(()=>t("div",{class:"newBanner d-flex justify-content-center align-items-center"},[t("div",{class:"newsTitle"},"購物車")],-1)),M={class:"bg-secondary"},B={class:"container"},F={class:"cartClear d-flex justify-content-between align-items-center"},O=m('<nav aria-label="breadcrumb" class="pt-5 pb-5" data-v-668b183f><ol class="breadcrumb" data-v-668b183f><li class="breadcrumb-item" data-v-668b183f><a href="#" data-v-668b183f>首頁</a></li><li class="breadcrumb-item active" aria-current="page" data-v-668b183f>購物車</li></ol></nav>',1),q={class:"text-end mb-3"},z={class:"row"},G={class:"col-8"},J={class:"table"},K=l(()=>t("thead",null,[t("tr",null,[t("th",{class:"col"}),t("th",{class:"col"},"圖片"),t("th",{class:"col"},"商品名稱"),t("th",{class:"col"},"價格"),t("th",{class:"col"},"數量"),t("th",{class:"col"},"總價")])],-1)),Q=["onClick"],W=l(()=>t("span",{class:"material-symbols-outlined"},"clear",-1)),X=[W],Y={style:{width:"150px"}},Z={class:"fs-6 fw-bold"},tt={class:"input-group input-group-sm"},et=["onUpdate:modelValue","onChange"],st=["value"],at={class:"col-4"},ot={class:"discount"},ct={class:"mb-3"},lt=l(()=>t("label",{for:"discount",class:"form-label fw-bold h5"},"優惠券折扣",-1)),nt={class:"text-end mb-3"},dt={class:"cartList p-3 mb-4"},rt=m('<h5 class="mb-5" data-v-668b183f>購物清單總計</h5><div class="cartTotal" data-v-668b183f><div class="cartOrigin d-flex justify-content-between align-items-center" data-v-668b183f><p data-v-668b183f>原始價格</p><p data-v-668b183f>NT$100</p></div><div class="cartDiscount d-flex justify-content-between align-items-center" data-v-668b183f><p data-v-668b183f>折扣</p><p data-v-668b183f>-NT$30</p></div><hr data-v-668b183f><div class="totalPrice mb-3 d-flex justify-content-between align-items-center" data-v-668b183f><p class="fw-bold fs-6" data-v-668b183f>總付款金額</p><p class="fw-bold" data-v-668b183f>NT$450</p></div></div>',2),it={class:"text-end mb-3"},_t=l(()=>t("button",{type:"button",class:"btn btn-primary"},"前往付款",-1));function ut(e,a,n,pt,g,c){const y=_("HeaderNav"),P=_("router-link"),C=_("FooterView");return d(),r(p,null,[u(y,{class:"bg-black position-static"}),j,t("div",M,[t("div",B,[t("div",F,[O,t("div",q,[t("button",{type:"button",class:"btn btn-lg btn-outline-primary",onClick:a[0]||(a[0]=(...s)=>c.deleteCarts&&c.deleteCarts(...s))}," 清空購物車 ")])]),t("div",z,[t("div",G,[t("table",J,[K,t("tbody",null,[(d(!0),r(p,null,v(g.carts.carts,s=>(d(),r("tr",{style:{"vertical-align":"middle"},key:s.id},[t("td",null,[t("button",{type:"button",class:"btn btn-danger btn-sm",onClick:o=>c.deleteCartItem(s.id)},X,8,Q)]),t("td",Y,[t("div",{style:E([{height:"100px","background-size":"cover","background-position":"center"},{backgroundImage:`url(${s.product.imageUrl})`}])},null,4)]),t("td",Z,i(s.product.title),1),t("td",null,"$"+i(s.product.price),1),t("td",null,[t("div",tt,[f(t("select",{name:"",id:"",class:"form-control","onUpdate:modelValue":o=>s.qty=o,onChange:o=>c.updateCartItem(s)},[(d(),r(p,null,v(10,o=>t("option",{value:o,key:o+"12345"},i(o),9,st)),64))],40,et),[[S,s.qty]])])]),t("td",null,"$"+i(s.total),1)]))),128))])])]),t("div",at,[t("div",ot,[t("div",ct,[lt,f(t("input",{type:"text",class:"form-control p-3",id:"discount",placeholder:"輸入優惠代碼","onUpdate:modelValue":a[1]||(a[1]=s=>this.coupon=s)},null,512),[[A,this.coupon]])]),t("div",nt,[t("button",{type:"button",class:"btn btn-primary",onClick:a[2]||(a[2]=(...s)=>c.useCoupon&&c.useCoupon(...s))}," 使用折扣 ")])]),t("div",dt,[rt,t("div",it,[u(P,{to:"/Order"},{default:k(()=>[_t]),_:1})])])])])])]),u(C)],64)}const vt=$(L,[["render",ut],["__scopeId","data-v-668b183f"]]);export{vt as default};
